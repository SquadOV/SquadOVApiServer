[fusionauth]
host = "http://internal-fusionauth-service"
port = 9011
api_key = "${FUSIONAUTH_API_KEY}"
tenant_id = "${FUSIONAUTH_TENANT_ID}"
application_id = "${FUSIONAUTH_CLIENT_ID}"

[database]
url = "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@127.0.0.1/squadov"
connections = 32
heavy_connections = 32

[cors]
domain = "https://app.${DEPLOYMENT_DOMAIN}"

[gcp]
enabled = true
service_account_key = "gcp/${GCP_PROJECT}.json"

[server]
domain = "api.${DEPLOYMENT_DOMAIN}"
graphql_debug = false

[gitlab]
access_token = "${GITLAB_ACCESS_TOKEN}"
project_id = ${GITLAB_PROJECT_ID}

[kafka]
bootstrap_servers = "${KAFKA_BROKERS}"
wow_combat_log_threads = 0
wow_combat_log_topic = "wow_combat_logs"

[kafka.client_keypair]
key = "${KAFKA_CLIENT_KEY}"
secret= "${KAFKA_CLIENT_SECRET}"

[kafka.server_keypair]
key = "${KAFKA_SERVER_KEY}"
secret= "${KAFKA_SERVER_SECRET}"

[vod]
fastify_threads = 0

[riot]
rso_url = "https://auth.riotgames.com/authorize?client_id=squadov&redirect_uri=https://app.squadov.gg/riot/oauth-callback&response_type=code&scope=openid+offline_access+cpid"
rso_client_id = "squadov"
rso_client_secret = "${RSO_CLIENT_SECRET}"

[riot.rso_api_key]
key = "${RSO_API_KEY}"

[riot.rso_api_key.burst_limit]
requests = 10
seconds = 10
enabled = false

[riot.rso_api_key.bulk_limit]
requests = 500
seconds = 600
enabled = false

[riot.valorant_api_key]
key = "${VALORANT_API_KEY}"

[riot.valorant_api_key.burst_limit]
requests = 500
seconds = 10
enabled = true

[riot.valorant_api_key.bulk_limit]
requests = 30000
seconds = 600
enabled = true

[riot.lol_api_key]
key = "${LOL_API_KEY}"

[riot.lol_api_key.burst_limit]
requests = 500
seconds = 10
enabled = true

[riot.lol_api_key.bulk_limit]
requests = 30000
seconds = 600
enabled = true

[riot.tft_api_key]
key = "${TFT_API_KEY}"

[riot.tft_api_key.burst_limit]
requests = 500
seconds = 10
enabled = true

[riot.tft_api_key.bulk_limit]
requests = 30000
seconds = 600
enabled = true

[twitch]
base_url = "https://id.twitch.tv/oauth2/authorize?response_type=code&client_id=hnu9lcnjjz2ymiok1f2okkf06x95d0&redirect_uri=${SQUADOV_API_URL}/twitch/oauth-callback&scope=channel:read:subscriptions+user:read:subscriptions+openid"
client_id = "${TWITCH_CLIENT_ID}"
client_secret = "${TWITCH_CLIENT_SECRET}"

[rabbitmq]
amqp_url = "${RABBITMQ_AMQP_URL}"
enable_rso = true
prefetch_count = 2
rso_queue = "riot_rso"
enable_valorant = true
valorant_queue = "valorant_api"
enable_lol = true
lol_queue = "lol_api"
enable_tft = true
tft_queue = "tft_api"
enable_vod = true
vod_queue = "squadov_vods"
enable_csgo = false
csgo_queue = "csgo_rmq"
enable_steam = true
steam_queue = "steam_api"

[email]
postmark_api_key = "${POSTMARK_API_KEY}"
invite_template = "squad-invitation"
welcome_template = "squad-welcome"

[squadov]
app_url = "https://app.${DEPLOYMENT_DOMAIN}"
landing_url = "https://${DEPLOYMENT_DOMAIN}"
invite_key = "${INVITE_HMAC_KEY}"
share_key = "${SHARE_ENCRYPTION_KEY}"

[steam]
api_key = "${STEAM_API_KEY}"
requests = 100000
seconds = 86400

[storage.vods]
global = "${DEFAULT_VOD_STORAGE_BUCKET}"
legacy = "${LEGACY_VOD_STORAGE_BUCKET}"

[storage.blobs]
global = "${DEFAULT_BLOB_STORAGE_BUCKET}"
legacy = "${LEGACY_VOD_STORAGE_BUCKET}"

[aws]
enabled = true
credential_path = "aws/api.profile"
profile = "api"